<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Volume Control: Addon Development</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="iconSilvered.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Volume Control
   </div>
   <div id="projectbrief">Application-specific hotkeys for Windows</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs__addon_development.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Addon Development </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Addons are written in C# with .NET Core 6 - you don't need any previous experience with C# in order to create addons, but this is not a tutorial for learning C#. <br  />
 <img src="AnatomyOfAVolumeControlAddon.png" alt="Anatomy of an addon graphic" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md5"></a>
Environment Setup</h1>
<p>This assumes you're using Visual Studio with the **.NET/C#** workload installed. <br  />
</p>
<ol type="1">
<li>Create a new **.NET Core 6 Class Library** type solution, and name it whatever you want. <br  />
 <img src="https://user-images.githubusercontent.com/1927798/169677073-716d9c3b-5928-4414-8985-3dc22a79c160.png" alt="image" class="inline"/> <br  />
 <img src="https://user-images.githubusercontent.com/1927798/169677083-622c7461-11bb-4b57-8eeb-664ced0fde6f.png" alt="image" class="inline"/> <br  />
</li>
<li>R+Click on your <code>.csproj</code> file and click <b>Properties</b>. In the property pages, change the <b>Target OS</b> to <b>Windows</b>: <br  />
 <img src="https://user-images.githubusercontent.com/1927798/169683966-573f9c1c-4971-4304-a8b5-c01c931af5c2.png" alt="image" class="inline"/> <br  />
 Press <em>Ctrl+S</em> to save the project file, then close the tab.</li>
<li>In the solution explorer, R+Click on your project and select <b>Manage NuGet Packages for Project</b> <br  />
 <img src="https://i.imgur.com/oLeVqaM.png" alt="image" class="inline"/> <br  />
</li>
<li>Switch to the <b>Browse</b> tab &amp; install the <code><a class="el" href="namespace_volume_control_1_1_s_d_k.html">VolumeControl.SDK</a></code> package. <br  />
 <img src="https://i.imgur.com/Zfka6S1.png" alt="image" class="inline"/> <br  />
</li>
</ol>
<h1><a class="anchor" id="autotoc_md6"></a>
Writing an Addon</h1>
<p>Here's an example of an action that opens a file using the default application.</p>
<div class="fragment"><div class="line">using System.Diagnostics;</div>
<div class="line">using VolumeControl.Core.Attributes;</div>
<div class="line">using VolumeControl.Core.Input;</div>
<div class="line"> </div>
<div class="line">namespace VolumeControl.TestAddon</div>
<div class="line">{</div>
<div class="line">    [HotkeyActionGroup(&quot;File&quot;, GroupColor = &quot;#F0F&quot;)]</div>
<div class="line">    public class FileActions</div>
<div class="line">    {</div>
<div class="line">        [HotkeyAction(Description = &quot;Opens a file with the default application.&quot;)]</div>
<div class="line">        [HotkeyActionSetting(&quot;Path&quot;, typeof(string), Description = &quot;The location of the file to open.&quot;)]</div>
<div class="line">        public void OpenFile(object? sender, HotkeyPressedEventArgs e)</div>
<div class="line">        {</div>
<div class="line">            Process.Start(new ProcessStartInfo(e.GetValue&lt;string&gt;(&quot;Path&quot;))</div>
<div class="line">            {</div>
<div class="line">                UseShellExecute = true</div>
<div class="line">            })?.Dispose();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>You can find the full code example <a href="https://github.com/radj307/volume-control.TestAddon">here</a>. <br  />
 Additionally, you can view the source code for Volume Control's built-in actions <a href="https://github.com/radj307/volume-control/tree/main/VolumeControl.HotkeyActions">here</a>.</p>
<p>See the <b><a href="https://github.com/radj307/volume-control/wiki/API-Documentation">API Documentation</a></b> for more information on what is available through the Volume Control SDK.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Building Your Addon</h1>
<p>Assuming you're using Visual Studio, you can use <b>Publish Profiles</b> to build your addon and place it in an easy-to-access directory. <br  />
</p>
<p>First, you'll need to create a new publish profile.</p>
<ol type="1">
<li>R+Click your addon project in the solution explorer, and select <b>Publish...</b> <br  />
 <img src="https://i.imgur.com/Ao5qYF0.png" alt="" class="inline"/></li>
<li>When asked to choose a target, select <b>Folder</b>. <br  />
 <img src="https://i.imgur.com/CYMEnam.png" alt="" class="inline"/></li>
<li>Choose an output directory; this should be a <b>relative</b> path that points somewhere within your solution directory / git repository. <br  />
 <img src="https://i.imgur.com/T3nt2Ga.png" alt="" class="inline"/> <br  />
</li>
<li>Do any additional configuration you want on your new publish profile. <br  />
 <img src="https://i.imgur.com/5Xzbvt1.png" alt="" class="inline"/> <br  />
</li>
<li>Click the <b>Publish</b> button to build your addon. <br  />
 The output files *(and only the output files)* can be found at the location you set in step 3. <br  />
 <img src="https://i.imgur.com/fbxy7VW.png" alt="" class="inline"/></li>
</ol>
<h1><a class="anchor" id="autotoc_md8"></a>
Loading Your Addon</h1>
<p><em>Tip: In order to see log messages related to the loading of addons, you should enable all of the log filters in the settings tab.</em></p>
<h2><a class="anchor" id="autotoc_md9"></a>
Where to Put Addons</h2>
<p>Volume Control will attempt to load addons from a few locations, depending on the version. <br  />
 Since v6.0.0, Volume Control will *(recursively)* load addons from <code>C:\Users\&lt;USERNAME&gt;\AppData\Local\radj307\<a class="el" href="namespace_volume_control.html">VolumeControl</a>\Addons</code> first, if that location exists. <br  />
 <b>Do not place Volume Control SDK dlls in addon directories, and do not include them when redistributing your addon.</b> <br  />
</p>
<p>Since <a href="https://github.com/radj307/volume-control/release/5.1.0">v5.1.0</a>, addons may also be located in any directories specified by the <code>CustomAddonDirectories</code> setting, which can be found in the configuration file: <br  />
 *(until <a href="https://github.com/radj307/volume-control/releases/5.2.0">v5.2.0</a>):* <code>~/AppData/Local/radj307/VolumeControl_Url_&lt;HASH&gt;/&lt;VERSION&gt;/user.config</code> <br  />
 *(since <a href="https://github.com/radj307/volume-control/releases/5.2.0">v5.2.0</a>):* <code>volumecontrol.json</code> located in the same directory as <code>VolumeControl.exe</code> <br  />
</p>
<p>Assuming you enabled <code>DEBUG</code> log messages, you will see messages in the log confirming that your addon was loaded when launching Volume Control: <br  />
 <img src="https://user-images.githubusercontent.com/1927798/169681684-f41649d3-49c0-4c33-aaf3-5454de4dfdad.png" alt="image" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md10"></a>
Redistributing Addons</h1>
<p>Once you've got your shiny new addon, you may want to distribute it to share your work. <br  />
 To encourage this, I've created an official repository for third-party addons <a href="https://github.com/radj307/volume-control.Addons">here</a>. <br  />
 Submit a pull request (or issue) including your addon DLL to add it to the repo! Be sure to include "@radj307" so I get notified.</p>
<blockquote class="doxtable">
<p>### Legal Because Volume Control is licensed under the <a href="https://github.com/radj307/volume-control/blob/main/LICENSE">GPLv3</a>, any code that uses the Volume Control SDK <b>must be licensed under the GPLv3 as well</b>; however <b>you are the sole owner</b> of the code that you write. <br  />
 The only real requirement for you to remain compliant with the GPLv3 license is that you must make the source code for your addon available to users. </p>
</blockquote>
<h3><a class="anchor" id="autotoc_md11"></a>
Summary:</h3>
<ul>
<li>Make sure you use the <a href="https://github.com/radj307/volume-control/blob/main/LICENSE">GNU General Public License 3 (GPLv3)</a> license for your addon when uploading it to github or elsewhere.</li>
<li>Make the source code for your addon available to users. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>

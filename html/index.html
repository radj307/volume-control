<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Volume Control: Addon Development</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="iconSilvered.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Volume Control
   </div>
   <div id="projectbrief">Application-specific hotkeys for Windows</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Addon Development </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Addons are written in C# with .NET Core 6 - you don't need any previous experience with C# in order to create addons, but this is not a tutorial for learning C#. <br  />
 You are legally allowed to create and redistribute addons so long as you comply with the terms of the <a href="https://github.com/radj307/volume-control/blob/main/LICENSE">GPLv3</a> license - You must make the full source code available along with any redistributed binaries (<code>.dll</code>s in this case) without any terms or conditions. <br  />
</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Pre-Requisites</h1>
<p>While the only actual requirement for making addons is the SDK, specific types, methods, and functions will require additional packages from nuget. <br  />
</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Volume Control SDK</h2>
<p>The SDK is primarily distributed through the <em>artifacts</em> system in github actions workflows. <br  />
</p><ol type="1">
<li>On the <a href="https://github.com/radj307/volume-control/actions">Actions</a> tab and find the most recent successful run of the 'Generate Release' action. <img src="https://user-images.githubusercontent.com/1927798/169680680-a3c318b6-0de1-4f0b-b5ce-f7f553103af1.png" alt="image" class="inline"/> <br  />
 Click on the title: <img src="https://user-images.githubusercontent.com/1927798/169680696-895c2cc2-711b-47d8-a522-483a0fe30435.png" alt="image" class="inline"/></li>
<li>At the bottom of the page, click on the 'sdk' artifact to download it. <br  />
 <img src="https://user-images.githubusercontent.com/1927798/169680760-13e79e2c-5161-4217-90c3-5bac5f5afc67.png" alt="image" class="inline"/></li>
<li>Extract the archive to a location of your choice; keep the filepath handy for later. <br  />
 You should now have these files *(this may or may not be accurate in future versions)* located somewhere: <br  />
 <img src="https://user-images.githubusercontent.com/1927798/169680790-d383dc96-983c-4b1d-94e5-a77507bda1a5.png" alt="image" class="inline"/> <br  />
</li>
</ol>
<h3><a class="anchor" id="autotoc_md3"></a>
A Note on File Extensions</h3>
<p>The actual files included in the SDK may change from version to version as code is organized and re-organized. <br  />
</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Extension </th><th class="markdownTableHeadNone">Purpose  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.dll</code> </td><td class="markdownTableBodyNone">Contains the source code and references needed to use it.<br  />
This is the bare minimum required to make addons.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>.pdb</code> </td><td class="markdownTableBodyNone">Contains debugging symbols, which allow you to use the debugger to step through code contained within the DLL.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>.xml</code> </td><td class="markdownTableBodyNone">Contains API documentation used by Visual Studio intellisense to provide inline documentation &amp; suggestions.  </td></tr>
</table>
<p>When using the SDK, keep files with the same filename *(not extension, somewhat obviously)* in the same directory to receive the benefits from each.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Environment Setup</h1>
<p>This assumes you're using Visual Studio with the .NET/C# workload installed. <br  />
</p>
<ol type="1">
<li>Create a new .NET Core 6 Class Library type solution, and name it whatever you want. <br  />
 <img src="https://user-images.githubusercontent.com/1927798/169677073-716d9c3b-5928-4414-8985-3dc22a79c160.png" alt="image" class="inline"/> <br  />
 <img src="https://user-images.githubusercontent.com/1927798/169677083-622c7461-11bb-4b57-8eeb-664ced0fde6f.png" alt="image" class="inline"/> <br  />
</li>
<li>In the solution explorer, expand your new project and R+Click on the <b>Dependencies</b> entry, then select any of the <b>Add ... Reference</b> options. <br  />
 <img src="https://user-images.githubusercontent.com/1927798/169680877-f5a0b8dc-153b-46bd-b566-3e25c6af01b4.png" alt="image" class="inline"/></li>
<li>Click on the <b>Browse</b> tab &amp; add the DLLs from the sdk you downloaded earlier using the <b>Browse</b> button at the bottom. <br  />
 <img src="https://user-images.githubusercontent.com/1927798/169681046-b9b1d092-8500-42d7-a587-3f75a5f3698c.png" alt="image" class="inline"/> <br  />
 Once you're done, click <b>OK</b>.</li>
<li>R+Click on your <code>.csproj</code> file and click <b>Properties</b>. In the property pages, change the <b>Target OS</b> to <b>Windows</b>: <br  />
 <img src="https://user-images.githubusercontent.com/1927798/169683966-573f9c1c-4971-4304-a8b5-c01c931af5c2.png" alt="image" class="inline"/> <br  />
 Press <em>Ctrl+S</em> to save the project file, then close the tab.</li>
<li>You are now able to create custom addons for Volume Control. <br  />
 Add <code>using <a class="el" href="namespace_volume_control.html">VolumeControl</a>;</code> to the first line, and you'll be able to use Visual Studio's autocomplete for the rest.</li>
</ol>
<h1><a class="anchor" id="autotoc_md5"></a>
Writing an Addon</h1>
<p>Here's an example of an addon that adds a hotkey action named 'Custom Action' that writes a message to the log when triggered. <br  />
 </p><div class="fragment"><div class="line">using System.ComponentModel;</div>
<div class="line">using VolumeControl.API;</div>
<div class="line">using VolumeControl.Hotkeys.Attributes;</div>
<div class="line">using VolumeControl.Log;</div>
<div class="line"> </div>
<div class="line">namespace VolumeControl.TestAddon</div>
<div class="line">{</div>
<div class="line">    [ActionAddon(nameof(TestActionAddon))] //&lt; This is required for all addon classes that should be loaded.</div>
<div class="line">    public class TestActionAddon</div>
<div class="line">    {</div>
<div class="line">        // Here we use a static property to shorten the </div>
<div class="line">        private static VCAPI API =&gt; VCAPI.Default;</div>
<div class="line"> </div>
<div class="line">        // This is the global logging object, which can be accessed through the static VCAPI.Log property.</div>
<div class="line">        //  Here, we do the same as above so we can write log messages with shorter syntax.</div>
<div class="line">        private static LogWriter Log =&gt; VCAPI.Log;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        // Now let&#39;s create a hotkey action named &#39;CustomAction&#39;, using the action event handler signature.</div>
<div class="line">        // All hotkey actions must return void, and accept 2 parameters of types object? &amp; HandledEventArgs.</div>
<div class="line">        [HotkeyAction] //&lt; this is required for all hotkey action methods</div>
<div class="line">        public void CustomAction(object? sender, HandledEventArgs e)</div>
<div class="line">        {</div>
<div class="line">            Log.Debug($&quot;Successfully triggered addon method {nameof(CustomAction)}!&quot;,</div>
<div class="line">                      $&quot;Currently selected session name: &#39;{API.AudioAPI.SelectedSession?.ProcessName}&#39;&quot;);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        [HotkeyAction(&quot;My Action Name&quot;)]</div>
<div class="line">        public void CustomAction2(object? sender, Handled)</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>You can find the full code example <a href="https://github.com/radj307/volume-control.TestAddon">here</a>.</p>
<p><b><a href="https://github.com/radj307/volume-control/wiki/API-Documentation">API Documentation</a></b></p>
<h1><a class="anchor" id="autotoc_md6"></a>
Building Your Addon</h1>
<p>Change the VS Configuration to <b>Release</b>, then build the solution. *(Ctrl+Shift+B)* <br  />
 You'll be able to find your <code>.dll</code> in the <code>&lt;SOLUTION&gt;/&lt;PROJECT&gt;/bin/Release/net6.0-windows/&lt;PROJECT&gt;.dll</code></p>
<h1><a class="anchor" id="autotoc_md7"></a>
Loading Your Addon</h1>
<p>Addons must be located within this directory, or in a subdirectory of this directory: <br  />
 <code>C:\Users\&lt;USERNAME&gt;\AppData\Local\radj307\Addons</code> <br  />
</p>
<p>To check if your addon was loaded, launch <a class="el" href="namespace_volume_control.html">VolumeControl</a> and click on the <b>Settings</b> tab. Find the <b>Filter</b> dropdown in the log settings area, and enable <code>DEBUG</code> messages by checking the box. <br  />
 Assuming you have logging enabled, you will now be able to see messages related to addons in the log file. *(by default, this is named <code>volumecontrol.log</code> and is located next to the executable)* <br  />
 <img src="https://user-images.githubusercontent.com/1927798/169681684-f41649d3-49c0-4c33-aaf3-5454de4dfdad.png" alt="image" class="inline"/></p>
<p>Note that any users of your redistributed addons must also place this file in the same location, so if you're writing installation instructions be sure to include that. <br  />
</p>
<h3><a class="anchor" id="autotoc_md8"></a>
Using Hotkey Action Addons</h3>
<ol type="1">
<li>Enable <em>Advanced Hotkeys</em> on the <b>Settings</b> tab.</li>
<li>On the <b>Hotkeys</b> tab, open the dropdown box under the <em>Action</em> column of any hotkey.</li>
<li>You can now select your custom action in the list.</li>
</ol>
<h3><a class="anchor" id="autotoc_md9"></a>
What about the SDK DLLs?</h3>
<p>The main program has these integrated inside of the <code>.exe</code> to facilitate a single-file release; all this is to say, once your addon is complete you don't need to include them anywhere, they are simply to allow Visual Studio to 'see' them.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Publishing Addons</h1>
<p>Once you've got your shiny new addon, you may want to distribute it to share your work. <br  />
 To encourage this, I've created an official repository for third-party addons <a href="https://github.com/radj307/volume-control.Addons">here</a>. <br  />
</p>
<p><b>Note: When uploading your addon to github, be sure to use the GPLv3 license, or a legally compatible alternative.</b> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
